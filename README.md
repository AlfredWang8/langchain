# 胸外科Agent
## 项目需求
### 功能需求：

- 信息提取：从医学文献、病例报告等资源中提取胸外科相关知识。

- 智能问答：能够回答关于胸外科疾病、治疗方法、术后护理等问题。

- 病例分析：分析患者病历并给出推荐治疗方案。

- 数据整合：从多源数据（如临床记录、影像学数据等）中提取有用信息。

### 技术需求：

- LangChain应用：利用LangChain构建自然语言处理功能，结合文档查询、链式推理等技术。

- 集成AI模型：集成适合医学领域的预训练语言模型。

- 接口设计：提供友好的用户接口，便于临床医师使用。

### 工作图初步设计

|节点名称|	功能说明|
|---|---|
|START|	工作图起点，接收用户输入|
|triage|	初步分类用户问题：症状、诊断、检查、治疗、术后护理等|
|retrieve_info|	调用医学搜索工具（如 Tavily）检索权威医学资料|
|clinical_reasoning|	使用模型进行医学推理，结合症状和背景给出初步判断|
|tool_calling|	根据需要调用工具，如医学数据库、图像分析、药物查询等|
|response_generation|	整合信息，生成专业、清晰的答复|
|END|	输出最终结果，结束流程|

## 进度更新
### 创建一个简单的问答工作流
#### 2025.9.23
- 创建了第一个ai问答机器人，具有以下功能：添加系统提示词、保存对话记忆、进行流式传输、将记录保存到Langsmith中。

#### 9.24
- 使用tavily工具引入了agent（代理）的概念，引入了系统提示词，设置ai身份为胸外科医生。

### 开始模块化编程
- 模块化编程的项目在文件夹**thoracic_agent**中。
#### 9.24
- 按照“**工作图初步设计**”的各个模块创建项目文件。
- 完成模型准备文件config.py的编写，该文件创建了一个基于DeepSeek和Tavily的使用工具的model。
- 完成初始问诊节点triage.py的编写，并在main.py中测试了输出，该节点输出逻辑为：
  - 用户提出问题，ai给出问题的解答和建议类型（**未知unknown、咨询diagnosis、检查diagnotic、治疗treatment**），如果为前两种类型，则对话继续，如果为后两种，对话终止并转入检查或治疗程序。
